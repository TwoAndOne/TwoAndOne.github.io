<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.jpeg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpeg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpeg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"twoandone.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="后端废物">
<meta property="og:type" content="website">
<meta property="og:title" content="Yussss">
<meta property="og:url" content="https://twoandone.github.io/page/2/">
<meta property="og:site_name" content="Yussss">
<meta property="og:description" content="后端废物">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yus">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://twoandone.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Yussss</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Yussss</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">沧浪之水清兮，可以濯我缨。沧浪之水浊兮，可以濯我足</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yus"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Yus</p>
  <div class="site-description" itemprop="description">后端废物</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:2414655851@qq.com" title="E-Mail → mailto:2414655851@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/04/11/LockSupport%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/11/LockSupport%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">LockSupport的使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-11 18:37:50" itemprop="dateCreated datePublished" datetime="2021-04-11T18:37:50+08:00">2021-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:02:25" itemprop="dateModified" datetime="2022-07-18T01:02:25+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;child thread begin park!&quot;</span>);</span><br><span class="line">                LockSupport.park();<span class="comment">//P操作</span></span><br><span class="line">                System.out.println(<span class="string">&quot;child thread unpark!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;main thread begin unpark!&quot;</span>);</span><br><span class="line">        LockSupport.unpark(thread);<span class="comment">//V操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210411184508095.png"
alt="image-20210411184508095" />
<figcaption aria-hidden="true">image-20210411184508095</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/04/11/%E5%85%B7%E6%9C%89%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E9%A1%BA%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/11/%E5%85%B7%E6%9C%89%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E9%A1%BA%E5%BA%8F/" class="post-title-link" itemprop="url">具有继承关系的对象创建顺序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-04-11 13:08:04" itemprop="dateCreated datePublished" datetime="2021-04-11T13:08:04+08:00">2021-04-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:02:34" itemprop="dateModified" datetime="2022-07-18T01:02:34+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Talk is cheap, show me the code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        a++;</span><br><span class="line">        System.out.println(<span class="string">&quot;静态块a:&quot;</span>+a);</span><br><span class="line">    &#125;</span><br><span class="line">    A()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A构造a:&quot;</span>+a);</span><br><span class="line">        System.out.println(<span class="string">&quot;A的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        b++;</span><br><span class="line">        System.out.println(<span class="string">&quot;静态块b:&quot;</span>+b);</span><br><span class="line">    &#125;</span><br><span class="line">    B()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B构造b:&quot;</span>+b);</span><br><span class="line">        System.out.println(<span class="string">&quot;B的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        a = <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果</p>
<figure>
<img
src="https://gitee.com/yuswork/my-images/raw/master/img/image-20210411131114234.png"
alt="image-20210411131114234" />
<figcaption aria-hidden="true">image-20210411131114234</figcaption>
</figure>
<p><strong>分析</strong></p>
<p><code>new</code>关键字用于实例化一个对象，而实例化一个对象首先要确保一个类已经被加载进JVM中</p>
<p>类加载的过程分为</p>
<ol type="1">
<li><p>加载：生产Class对象，存在方法区</p></li>
<li><p>连接</p>
<ol type="1">
<li>验证：文件格式、元数据、字节码、符号引用验证</li>
<li>准备：为类变量分配内存，也就是被<code>static</code>关键字修饰的变量</li>
<li>解析：将常量池的符号引用替换成直接引用，也就是得到类或字段、方法在内存中的指针或者偏移量</li>
</ol></li>
<li><p>初始化：如果父类未初始化，会先触发父类的初始化，初始化会按照代码顺序依次执行静态变量和静态块，如下图，在静态块中引用未初始化的静态变量会编译失败。</p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210411141955637.png"
alt="image-20210411141955637" />
<figcaption aria-hidden="true">image-20210411141955637</figcaption>
</figure></li>
</ol>
<p><strong>总结</strong></p>
<p>所以运行结果是输出A类的静态块接着输出B类的静态块，然后因为类已经加载进来了，所以第二次new的时候就不需要执行被static修饰的部分了</p>
<p>实例化对象时，通过构造方法实现，如果有父类需要先实例化父类再实例化子类。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/23/RocketMQ%202m2s%20%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95%20Mac+Windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/23/RocketMQ%202m2s%20%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95%20Mac+Windows/" class="post-title-link" itemprop="url">RocketMQ 2m2s 集群搭建踩坑记录 Mac+Windows</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-23 13:42:25" itemprop="dateCreated datePublished" datetime="2021-03-23T13:42:25+08:00">2021-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:28:37" itemprop="dateModified" datetime="2022-07-18T01:28:37+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>离离原上谱，究极操作，在 Mac OS 系统和 Windows 系统上搭建 rocketmq
双主双从集群，踩坑指南，搭建完成，凭记忆写写遇到的坑。</p>
<ol type="1">
<li>首先安装官网教程搭建一遍单节点的教程，如果有问题再看以下文档
https://rocketmq.apache.org/docs/quick-start/</li>
<li>双主双从，因为笔者只有两台电脑，分别查询 ip 地址，并配置 host</li>
</ol>
<table>
<thead>
<tr class="header">
<th>mac</th>
<th>windows</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>192.168.31.116</td>
<td>192.168.31.22</td>
</tr>
</tbody>
</table>
<p>先互相 ping 一下，看看能不能 ping 通</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nameserver</span></span><br><span class="line">192.168.31.116 rocketmq-nameserver1</span><br><span class="line">192.168.31.22 rocketmq-nameserver2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">broker</span></span><br><span class="line">192.168.31.116 rocketmq-master1</span><br><span class="line">192.168.31.116 rocketmq-slave2</span><br><span class="line"></span><br><span class="line">192.168.31.22 rocketmq-master2</span><br><span class="line">192.168.31.22 rocketmq-slave1</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>创建消息存储路径 选择一个路径创建两个文件夹</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/yus/workspace/i</span><br><span class="line">mkdir rocketmq/store-a</span><br><span class="line">mkdir rocketmq/store-b</span><br><span class="line">sudo chmod -R 777 rocketmq # 授权</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/uPic/image-20220320212940772.png"
alt="image-20220320212940772" />
<figcaption aria-hidden="true">image-20220320212940772</figcaption>
</figure>
<p>这里就是一个坑，当时我按步骤操作完之后，启动 broker ,查看日志
<code>tail -200f ~/logs/rocketmqlogs/broker.log</code> 一直报错</p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/uPic/image-20220320213846290.png"
alt="image-20220320213846290" />
<figcaption aria-hidden="true">image-20220320213846290</figcaption>
</figure>
<p>所以你看我的图片上的文件名被黄色背景包裹起来了，其实就是权限的问题，默认不给编辑权限。为了找到这个错，还专门用
idea 启动 broker，进行 debug。下图是 idea 启动 broker 需要的配置：</p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/uPic/image-20220320214201826.png"
alt="image-20220320214201826" />
<figcaption aria-hidden="true">image-20220320214201826</figcaption>
</figure>
<ol type="1">
<li>broker 配置文件 我们需要在 Mac 上配置 master1 和 slave2</li>
</ol>
<p>进入到路径：<code>/Users/yus/workspace/i/rocketmq-rocketmq-all-4.6.0/distribution/target/rocketmq-4.6.0/rocketmq-4.6.0/conf/2m-2s-sync/broker-a.properties</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">暴露的外网IP</span></span><br><span class="line">brokerIP1=192.168.31.116</span><br><span class="line">brokerIP2=192.168.31.22</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog每个文件的大小默认1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/Users/yus/workspace/i/rocketmq/store-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/Users/yus/workspace/i/rocketmq/store-a/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/Users/yus/workspace/i/rocketmq/store-a/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/Users/yus/workspace/i/rocketmq/store-a/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/Users/yus/workspace/i/rocketmq/store-a/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/Users/yus/workspace/i/rocketmq/store-a/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=SYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=SYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure>
<p>进入到路径：<code>/Users/yus/workspace/i/rocketmq-rocketmq-all-4.6.0/distribution/target/rocketmq-4.6.0/rocketmq-4.6.0/conf/2m-2s-sync/broker-b-s.properties</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-b</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=11011</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog每个文件的大小默认1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue每个文件默认存30W条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/Users/yus/workspace/i/rocketmq/store-b</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/Users/yus/workspace/i/rocketmq/store-b/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/Users/yus/workspace/i/rocketmq/store-b/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/Users/yus/workspace/i/rocketmq/store-b/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/Users/yus/workspace/i/rocketmq/store-b/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/Users/yus/workspace/i/rocketmq/store-b/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=SLAVE</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure>
<p>windows
里，也同样需要配置这个，不过是broker-b.properties，broker-a-s.properties。</p>
<p>需要更改的是以下几个路径，要换成 windows 里你创建的 store-a 和
store-b 的路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#存储路径</span><br><span class="line">#commitLog 存储路径</span><br><span class="line">#消费队列存储路径存储路径</span><br><span class="line">#消息索引存储路径</span><br><span class="line">#checkpoint 文件存储路径</span><br><span class="line">#abort 文件存储路径</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>其实这里有个坑的，不要自己去创建
commitLog、consumequeue、index、checkpoint
的文件夹，不然会报错。B站的黑马教程误我！<img
src="https://github.com/TwoAndOne/my-images/raw/master/uPic/image-20220320215716362.png"
alt="image-20220320215716362" /></li>
<li>修改启动 broker 的文件，里面的内存加太大了,windows 里改.cmd 结尾的
<code>xxx/bin/runbroker.sh</code></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -server -Xms256m -Xmx256m -Xmn128m&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:MaxDirectMemorySize=256m&quot;</span></span><br></pre></td></tr></table></figure>
<ol type="1">
<li>可以用命令 JPS 查看启动进程，成功了的话需要启动两个 broker 和一个
server</li>
<li>查看日志</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mac</span></span><br><span class="line"><span class="built_in">tail</span> -200f ~/logs/rocketmqlogs/broker.log</span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">C:\Users\asus\logs\rocketmqlogs\broker.log</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/23/JVM-GC%E5%8F%82%E6%95%B0-xms-xss-xmn-xss-%E5%8A%A9%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/23/JVM-GC%E5%8F%82%E6%95%B0-xms-xss-xmn-xss-%E5%8A%A9%E8%AE%B0/" class="post-title-link" itemprop="url">JVM GC参数(Xmn,Xms,Xmx,Xss)助记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-23 12:18:20" itemprop="dateCreated datePublished" datetime="2021-03-23T12:18:20+08:00">2021-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-03-28 13:52:45" itemprop="dateModified" datetime="2021-03-28T13:52:45+08:00">2021-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="overview">Overview</h2>
<p><strong>太长不看总结:</strong></p>
<table>
<thead>
<tr class="header">
<th>Option</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-</td>
<td>标准VM 选项</td>
</tr>
<tr class="even">
<td>-X</td>
<td>非标准VM选项</td>
</tr>
<tr class="odd">
<td>-Xms</td>
<td>maximum size 设置堆的最大初始初始值</td>
</tr>
<tr class="even">
<td>-Xmn</td>
<td>maximum nursery 设置堆中新生代的最大初始值</td>
</tr>
<tr class="odd">
<td>-Xmx</td>
<td>memory maximum 设置堆的最大值</td>
</tr>
<tr class="even">
<td>-Xss</td>
<td>stack size 设置线程中栈的内容大小</td>
</tr>
</tbody>
</table>
<p>-Xms, -Xms, -Xmn, -Xss</p>
<p>在看技术博客时,看到到这些参数是不是很无语,完全不知道说的是啥,根本无法理解!</p>
<p>但是仔细想想写JDK的那群神仙会像我们这种菜鸟随便命名吗?</p>
<p>所以我放下书本去翻了一下文档</p>
<p>https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html</p>
<blockquote>
<p>OptionsThe <code>java</code> command supports a wide range of options
that can be divided into the following categories:</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABDJJFI">Standard
Options</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABHDABI">Non-Standard
Options</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABCBGHF">Advanced
Runtime Options</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABDDFII">Advanced
JIT Compiler Options</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABFJDIC">Advanced
Serviceability Options</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABFAFAE">Advanced
Garbage Collection Options</a></li>
</ul>
<p>Standard options are guaranteed to be supported by all
implementations of the Java Virtual Machine (JVM). They are used for
common actions, such as checking the version of the JRE, setting the
class path, enabling verbose output, and so on.</p>
<p>Non-standard options are general purpose options that are specific to
the Java HotSpot Virtual Machine, so they are not guaranteed to be
supported by all JVM implementations, and are subject to change. These
options start with <code>-X</code>.</p>
<p>Advanced options are not recommended for casual use. These are
developer options used for tuning specific areas of the Java HotSpot
Virtual Machine operation that often have specific system requirements
and may require privileged access to system configuration parameters.
They are also not guaranteed to be supported by all JVM implementations,
and are subject to change. Advanced options start with
<code>-XX</code>.</p>
</blockquote>
<p>翻译一下,大概就是java提供了很多命令,有标准的,有非标准的,非标准的就得用<code>-X</code>开头,进阶一点不建议平时使用的用<code>-XX</code>开头</p>
<p>好的,我们已经明白这几个命令的开头是什么意思了</p>
<ul>
<li>- : 标准VM选项，VM规范的选项</li>
<li>-X: 非标准VM选项，不保证所有VM支持</li>
<li>-XX: 高级选项，高级特性，但属于不稳定的选项</li>
</ul>
<h2 id="xmn">-Xmn</h2>
<blockquote>
<p>Sets the initial and maximum size (in bytes) of the heap for the
young generation (nursery).</p>
</blockquote>
<p>为新生代设置在堆上的初始最大值</p>
<blockquote>
<p>Append the letter <code>k</code> or <code>K</code> to indicate
kilobytes, <code>m</code> or <code>M</code> to indicate megabytes,
<code>g</code> or <code>G</code> to indicate gigabytes.</p>
</blockquote>
<p>参数后可以指定单位,比如用k、m、g</p>
<blockquote>
<p>The young generation region of the heap is used for new objects. GC
is performed in this region more often than in other regions. If the
size for the young generation is too small, then a lot of minor garbage
collections will be performed. If the size is too large, then only full
garbage collections will be performed, which can take a long time to
complete.</p>
</blockquote>
<p>堆的新生代区域用于新对象。GC在这个区域执行的频率高于其他区域。如果年轻代size太小，那么将执行大量次要的垃圾收集。如果size太大，则只有完整的垃圾收集才会被执行，这可能需要很长时间才能完成。</p>
<blockquote>
<p>Oracle recommends that you keep the size for the young generation
between a half and a quarter of the overall heap size.</p>
</blockquote>
<p>Oracle建议将新生代的堆的size保持在总体堆size的二分之一到四分之一之间。</p>
<blockquote>
<p>The following examples show how to set the initial and maximum size
of young generation to 256 MB using various units:</p>
<p>-Xmn256m</p>
<p>-Xmn262144k</p>
<p>-Xmn268435456</p>
<p>Instead of the <code>-Xmn</code> option to set both the initial and
maximum size of the heap for the young generation, you can use
<code>-XX:NewSize</code> to set the initial size and
<code>-XX:MaxNewSize</code> to set the maximum size.</p>
</blockquote>
<p>下面是使用不同的单位设置新生代的例子,不翻译了,都能看懂.</p>
<p><strong>总结</strong></p>
<p>-Xmn 指的是,</p>
<ul>
<li><p>-X:非标准VM选项</p></li>
<li><p>m:maximum 最大</p></li>
<li><p>n: nursery :托儿所</p></li>
</ul>
<p>最大的托儿所,就是新生代最大size</p>
<h2 id="xms">-Xms</h2>
<blockquote>
<p>Sets the initial size (in bytes) of the heap. This value must be a
multiple of 1024 and greater than 1 MB. Append the letter <code>k</code>
or <code>K</code> to indicate kilobytes, <code>m</code> or
<code>M</code> to indicate megabytes, <code>g</code> or <code>G</code>
to indicate gigabytes.</p>
</blockquote>
<p>设置堆的初始最大size,这个值必须是1024的倍数,必须大于1MB,可以用k、m、g做参数后面的单位</p>
<blockquote>
<p>The following examples show how to set the size of allocated memory
to 6 MB using various units:</p>
<p><code>-Xms6291456 -Xms6144k -Xms6m</code></p>
</blockquote>
<p>下面是一些例子,用不同单位设置6MB的最大内存</p>
<p><strong>总结</strong></p>
<ul>
<li><p>-X:非标准VM选项</p></li>
<li><p>m:最大 maximum</p></li>
<li><p>s:大小 size</p></li>
</ul>
<p>在堆上初始最大的容量</p>
<h2 id="xmx">-Xmx</h2>
<blockquote>
<p>Specifies the maximum size (in bytes) of the memory allocation pool
in bytes. This value must be a multiple of 1024 and greater than 2 MB.
Append the letter <code>k</code> or <code>K</code> to indicate
kilobytes, <code>m</code> or <code>M</code> to indicate megabytes,
<code>g</code> or <code>G</code> to indicate gigabytes.</p>
</blockquote>
<p>指定堆的最大值,跟-Xms的区别是,ms是初始值,这个是可容纳的最大值</p>
<blockquote>
<p>The default value is chosen at runtime based on system configuration.
For server deployments, <code>-Xms</code> and <code>-Xmx</code> are
often set to the same value. See the section "Ergonomics" in <em>Java SE
HotSpot Virtual Machine Garbage Collection Tuning Guide</em> at
`<code>http://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html</code>.</p>
</blockquote>
<p>默认值是基于系统配置在运行时选择的,在服务部署时,-Xms与-Xmx一般被设置为同样的大小</p>
<blockquote>
<p>The following examples show how to set the maximum allowed size of
allocated memory to 80 MB using various units:</p>
</blockquote>
<p>80MB的例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-Xmx83886080</span><br><span class="line">-Xmx81920k</span><br><span class="line">-Xmx80m</span><br></pre></td></tr></table></figure>
<p>The <code>-Xmx</code> option is equivalent to
<code>-XX:MaxHeapSize</code>.</p>
<p><strong>总结</strong></p>
<ul>
<li><p>-X:非标准VM选项</p></li>
<li><p>m:最大 memory</p></li>
<li><p>x:大小 maximum</p></li>
</ul>
<p>最大的容量</p>
<h2 id="xss">-Xss</h2>
<blockquote>
<p>Sets the thread stack size (in bytes). Append the letter
<code>k</code> or <code>K</code> to indicate KB, <code>m</code> or
<code>M</code> to indicate MB, <code>g</code> or <code>G</code> to
indicate GB. The default value depends on virtual memory.</p>
</blockquote>
<p>设置线程栈的大小,可以用不同的单位来设置,默认值取决于虚拟机.</p>
<p>The following examples set the thread stack size to 1024 KB in
different units:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-Xss1m</span><br><span class="line">-Xss1024k</span><br><span class="line">-Xss1048576</span><br></pre></td></tr></table></figure>
<p>This option is equivalent to <code>-XX:ThreadStackSize</code>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/23/%E7%90%86%E8%A7%A3%E5%BC%BA%E5%BC%95%E7%94%A8%E3%80%81%E8%BD%AF%E5%BC%95%E7%94%A8%E3%80%81%E5%BC%B1%E5%BC%95%E7%94%A8%E3%80%81%E8%99%9A%E5%BC%95%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/23/%E7%90%86%E8%A7%A3%E5%BC%BA%E5%BC%95%E7%94%A8%E3%80%81%E8%BD%AF%E5%BC%95%E7%94%A8%E3%80%81%E5%BC%B1%E5%BC%95%E7%94%A8%E3%80%81%E8%99%9A%E5%BC%95%E7%94%A8/" class="post-title-link" itemprop="url">理解强引用、软引用、弱引用、虚引用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-23 12:03:09" itemprop="dateCreated datePublished" datetime="2021-03-23T12:03:09+08:00">2021-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:03:09" itemprop="dateModified" datetime="2022-07-18T01:03:09+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="强引用">强引用</h1>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">reference</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">testReference</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">test</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">3</span>);</span><br><span class="line">        test = <span class="literal">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test被回收了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>强引用是最普遍的引用,在代码中随处可见,只要某个对象与强引用关联,这个对象就不会被回收,JVM宁愿抛出OOM也不会回收.</p>
<p>那么什么时候才能被回收呢?</p>
<p>手动把引用指向null,比如上述代码中</p>
<p><code>test = null</code></p>
<h1 id="软引用">软引用</h1>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210323132537741.png"
alt="image-20210323132537741" />
<figcaption aria-hidden="true">image-20210323132537741</figcaption>
</figure>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210323132606414.png"
alt="image-20210323132606414" />
<figcaption aria-hidden="true">image-20210323132606414</figcaption>
</figure>
<p>软引用需要用SoftReference对象包装一下</p>
<p>它的特点是,当内存不足时,就会触发JVM的GC,如果GC后内存还是不足,就会把软引用包裹的对象回收.也就是说只有当内存不足时,JVM才会回收软引用</p>
<p>解释一下图片的例子:</p>
<p>创建一个软引用对象,里面包裹byte[],byte[]占用10M,设置JVM运行参数,-Xmx,表示堆内存最大容量</p>
<p>这个参数不懂的可以参考笔者另一篇文章</p>
<p>第一次用softReference.get()方法获取该引用的地址</p>
<p>手动打开GC</p>
<p>GC后,测试发现该引用还是存在,这是因为内存还比较充足</p>
<p>接着再创建一个10M的byte[]对象</p>
<p>再次用softReference.get()方法获取软引用的地址,发现已经为null了</p>
<p><strong>软引用的作用</strong></p>
<p>做缓存吧,内存够就正常拿缓存,内存不够就干掉它,不至于马上抛出OOM</p>
<h2 id="弱引用">弱引用</h2>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210323133735452.png"
alt="image-20210323133735452" />
<figcaption aria-hidden="true">image-20210323133735452</figcaption>
</figure>
<p>弱引用是用WeakReference来包裹对象</p>
<p>无论有没有内存,gc遇到它就回收</p>
<p><strong>什么时候用呢</strong></p>
<p>ThreadLocal,WeakHashMap</p>
<p>ThreadLocal是一个本地线程副本变量工具类。内部是一个<strong>弱引用</strong>的Map来维护。</p>
<p>WeakHashMap其实和HashMap大多数行为是一样的，只是WeakHashMap不会阻止GC回收key对象（不是value）</p>
<h2 id="虚引用">虚引用</h2>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210323134603056.png"
alt="image-20210323134603056" />
<figcaption aria-hidden="true">image-20210323134603056</figcaption>
</figure>
<p>运行完直接返回null,说明根本拿不到虚引用指向的对象</p>
<p>看图中,创建虚引用不仅需要传入被包裹对象,还得传入一个ReferenceQueue ,
当GC准备回收一个对象时,如果发现它还有虚引用,就会在回收之前,把这个虚引用加入到与之关联的ReferenceQueue中.</p>
<p>平时没用到虚引用,所以我也不是很懂,待续.......</p>
<p>NIO中好像使用了虚引用管理堆外内存.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/22/cmd%E5%91%BD%E4%BB%A4%E4%B8%8ELinux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/22/cmd%E5%91%BD%E4%BB%A4%E4%B8%8ELinux%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">cmd命令与Linux命令的区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-22 21:03:16" itemprop="dateCreated datePublished" datetime="2021-03-22T21:03:16+08:00">2021-03-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-03-28 13:52:56" itemprop="dateModified" datetime="2021-03-28T13:52:56+08:00">2021-03-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>太长不看总结</strong></p>
<p>cmd是.exe程序,windows系统拿来模拟Dos系统的</p>
<p>Linux命令也就是shell,是用户态于内核态的交互层,功能更强大.</p>
<table>
<thead>
<tr class="header">
<th><strong>功能</strong></th>
<th><strong>cmd</strong></th>
<th><strong>linux</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>复制文件</td>
<td>copy</td>
<td>cp</td>
</tr>
<tr class="even">
<td>移动文件</td>
<td>move</td>
<td>mv</td>
</tr>
<tr class="odd">
<td>列举文件</td>
<td>dir</td>
<td>ls</td>
</tr>
<tr class="even">
<td>清除屏幕</td>
<td>cls</td>
<td>clear</td>
</tr>
<tr class="odd">
<td>退出</td>
<td>exit</td>
<td>exit</td>
</tr>
<tr class="even">
<td>显示修改日期</td>
<td>date</td>
<td>date</td>
</tr>
<tr class="odd">
<td>删除文件</td>
<td>del</td>
<td>rm</td>
</tr>
<tr class="even">
<td>回响信息到屏幕</td>
<td>echo</td>
<td>echo</td>
</tr>
<tr class="odd">
<td>用编辑器编辑文件</td>
<td>edit</td>
<td>vi</td>
</tr>
<tr class="even">
<td>比较文件内容</td>
<td>fc</td>
<td>diff</td>
</tr>
<tr class="odd">
<td>在文件中查找字符串</td>
<td>find</td>
<td>grep</td>
</tr>
<tr class="even">
<td>显示命令帮助</td>
<td>命令/?</td>
<td>man 命令</td>
</tr>
<tr class="odd">
<td>创建目录</td>
<td>mkdir</td>
<td>mkdir</td>
</tr>
<tr class="even">
<td>删除目录</td>
<td>rd</td>
<td>rmdir</td>
</tr>
<tr class="odd">
<td>目录更名</td>
<td>move</td>
<td>mv</td>
</tr>
<tr class="even">
<td>拷贝目录</td>
<td>xcopy</td>
<td>copy</td>
</tr>
<tr class="odd">
<td>查看文件</td>
<td>more</td>
<td>less</td>
</tr>
<tr class="even">
<td>重命名文件</td>
<td>ren</td>
<td>mv</td>
</tr>
<tr class="odd">
<td>切换目录</td>
<td>cd</td>
<td>cd</td>
</tr>
<tr class="even">
<td>显示时间</td>
<td>time</td>
<td>date</td>
</tr>
<tr class="odd">
<td>显示已被使用的内存</td>
<td>mem</td>
<td>free</td>
</tr>
<tr class="even">
<td>在屏幕打印文件内容</td>
<td>type</td>
<td>cat</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/21/%E7%90%86%E8%A7%A3BIO-NIO-AIO-IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/21/%E7%90%86%E8%A7%A3BIO-NIO-AIO-IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" class="post-title-link" itemprop="url">理解BIO,NIO,AIO,IO多路复用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-21 18:56:41" itemprop="dateCreated datePublished" datetime="2021-03-21T18:56:41+08:00">2021-03-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:04:09" itemprop="dateModified" datetime="2022-07-18T01:04:09+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>预备知识:</strong></p>
<p>操作系统分内核态与用户态,真正的I/O操作都不是应用程序在做,为了保证安全,操作系统提供了系统调用,比如read&amp;write.</p>
<p>通常一个应用程序的执行代表一个进程,当应用程序需要I/O时就会执行系统调用.</p>
<p>比如一次read指令的执行,应用调用read指令,内核从外部设备获取数据放入内核缓冲区,然后又把内核缓存区的内容复制到进程缓冲区.</p>
<p><strong>四种IO模型:</strong></p>
<p>１.　BＩＯ，同步阻塞IO</p>
<p>２.　ＮＩＯ，同步非阻塞IO</p>
<p>３.　IO多路复用,同步非阻塞IO升级版</p>
<p>４.　AIO，异步非阻塞IO</p>
<p>怎么理解用一个例子来执行一下就好啦</p>
<p><strong>BIO</strong></p>
<p><img src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210321191140634.png" alt="image-20210321191140634" style="zoom:67%;" /></p>
<p>首先我们得知道,内核态的内存缓冲区也不是一开始就有数据的,所以这就分了两个阶段,</p>
<p>第一个是等待内核态内存缓存区充满的过程,</p>
<p>第二个是从内核态内存缓存区复制到进程缓冲区的过程</p>
<p>所以同步阻塞IO就比较惨,在这两个阶段都得等着</p>
<p>第一个阶段是阻塞,用户态发起IO执行read调用指令,如果内核态没数据就被ＯＳ挂起</p>
<p>第二个阶段内核态复制数据到进程缓冲区,它也不能干其他的.</p>
<p><strong>NIO</strong></p>
<p><img src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210321191002045.png" alt="image-20210321191002045" style="zoom:70%;" /></p>
<p>同步非阻塞也没好到哪里去</p>
<p>第一个阶段,虽然没有被阻塞,但是也得不停的轮询,不断发起IO系统调用</p>
<p>第二个阶段，等待复制完成</p>
<p><strong>IO多路复用</strong></p>
<p><img src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210321195033926.png" alt="image-20210321195033926" style="zoom:67%;" /></p>
<p>IO多路复用本质上还是同步非阻塞</p>
<p>在这种模式中，首先不是进行read系统调动，而是进行select/epoll系统调用。当然，这里有一个前提，需要将目标网络连接，提前注册到select/epoll的可查询socket列表中。然后，才可以开启整个的IO多路复用模型的读流程。</p>
<p>（1）进行select/epoll系统调用，查询可以读的连接。kernel会查询所有select的可查询socket列表，当任何一个socket中的数据准备好了，select就会返回。</p>
<p>当用户进程调用了select，那么整个线程会被block（阻塞掉）。</p>
<p>（2）用户线程获得了目标连接后，发起read系统调用，用户线程阻塞。内核开始复制数据。它就会将数据从kernel内核缓冲区，拷贝到用户缓冲区（用户内存），然后kernel返回结果。</p>
<p>（3）用户线程才解除block的状态，用户线程终于真正读取到数据，继续执行。</p>
<p>多路复用IO的特点：</p>
<p>IO多路复用模型，建立在操作系统kernel内核能够提供的多路分离系统调用select/epoll基础之上的。多路复用IO需要用到两个系统调用（system
call）， 一个select/epoll查询调用，一个是IO的读取调用。</p>
<p>和NIO模型相似，多路复用IO需要轮询。负责select/epoll查询调用的线程，需要不断的进行select/epoll轮询，查找出可以进行IO操作的连接。</p>
<p>另外，多路复用IO模型与前面的NIO模型，是有关系的。对于每一个可以查询的socket，一般都设置成为non-blocking模型。只是这一点，对于用户程序是透明的（不感知）。</p>
<p>多路复用IO的优点：</p>
<p>用select/epoll的优势在于，它可以同时处理成千上万个连接（connection）。与一条线程维护一个连接相比，I/O多路复用技术的最大优势是：系统不必创建线程，也不必维护这些线程，从而大大减小了系统的开销。</p>
<p>Java的NIO（new
IO）技术，使用的就是IO多路复用模型。在linux系统上，使用的是epoll系统调用。</p>
<p>多路复用IO的缺点：</p>
<p>本质上，select/epoll系统调用，属于同步IO，也是阻塞IO。都需要在读写事件就绪后，自己负责进行读写，也就是说这个读写过程是阻塞的。</p>
<p><strong>AIO</strong></p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210321195511679.png"
alt="image-20210321195511679" />
<figcaption aria-hidden="true">image-20210321195511679</figcaption>
</figure>
<p>如果大家学过终端的话就容易理解AIO</p>
<p>第一个阶段,用户态程序执行read调用,如果内核态没数据,那就做其他事情</p>
<p>第二个阶段,内核态把数据复制到了用户态的进程缓冲区后通知用户应用程序</p>
<p>异步IO模型的特点：</p>
<p>在内核kernel的等待数据和复制数据的两个阶段，用户线程都不是block(阻塞)的。用户线程需要接受kernel的IO操作完成的事件，或者说注册IO操作完成的回调函数，到操作系统的内核。所以说，异步IO有的时候，也叫做信号驱动
IO 。</p>
<p>异步IO模型缺点：</p>
<p>需要完成事件的注册与传递，这里边需要底层操作系统提供大量的支持，去做大量的工作。</p>
<p>目前来说， Windows 系统下通过 IOCP 实现了真正的异步
I/O。但是，就目前的业界形式来说，Windows
系统，很少作为百万级以上或者说高并发应用的服务器操作系统来使用。</p>
<p>而在 Linux
系统下，异步IO模型在2.6版本才引入，目前并不完善。所以，这也是在 Linux
下，实现高并发网络编程时都是以 IO 复用模型模式为主。</p>
<p><strong>总结</strong></p>
<p>只有AIO不会阻塞,其他的都会在第二个阶段阻塞.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/21/Switch%20jdk8%20jdk17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/21/Switch%20jdk8%20jdk17/" class="post-title-link" itemprop="url">Switch jdk8 jdk17</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-21 13:42:25" itemprop="dateCreated datePublished" datetime="2021-03-21T13:42:25+08:00">2021-03-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:23:24" itemprop="dateModified" datetime="2022-07-18T01:23:24+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>For the system Java wrappers to find this JDK, symlink it with</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk</span><br></pre></td></tr></table></figure>
<p>openjdk is keg-only, which means it was not symlinked into
/opt/homebrew, because macOS provides similar software and installing
this software in parallel can cause all kinds of trouble.</p>
<p>If you need to have openjdk first in your PATH, run:
<code>echo 'export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"' &gt;&gt; ~/.zshrc</code></p>
<p>For compilers to find openjdk you may need to set:
<code>export CPPFLAGS="-I/opt/homebrew/opt/openjdk/include"</code></p>
<p>.zshrc
文件修改以下配置，只要输入jdk8就切换jdk8的环境,输入jdk17就切换17 jdk</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_8_HOME=&quot;/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/&quot;</span><br><span class="line">export JAVA_17_HOME=&quot;/opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home&quot;</span><br><span class="line">alias jdk8=&quot;export JAVA_HOME=$JAVA_8_HOME&quot;</span><br><span class="line">alias jdk17=&quot;export JAVA_HOME=$JAVA_17_HOME&quot;</span><br><span class="line">export JAVA_HOME=$JAVA_8_HOME</span><br><span class="line">export PATH=$PATH:$JAVA_HOME</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/20/Genshin%E8%82%9D%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/20/Genshin%E8%82%9D%E5%BD%95/" class="post-title-link" itemprop="url">Genshin 肝录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-20 13:42:25" itemprop="dateCreated datePublished" datetime="2021-03-20T13:42:25+08:00">2021-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:24:56" itemprop="dateModified" datetime="2022-07-18T01:24:56+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="甘雨">甘雨</h1>
<h3 id="天赋周二周五周日-勤劳的哲学">天赋（周二、周五、周日
勤劳的哲学）</h3>
<p>二段蓄力 霜华矢 霜华绽放 冰元素伤害</p>
<p>E 持续 6s 冷却 10s</p>
<p>Q 持续 15s 冷却 15s 元素能量 60</p>
<h3 id="武器周二周五周日">武器（周二、周五、周日）</h3>
<p>破魔之弓 重击提升 12%</p>
<p><strong>砂之祭场 冬国仕女 射手丘丘人</strong></p>
<h3 id="命座">命座</h3>
<p>饮露 ：二段蓄力降低冰抗 15% 持续 6s</p>
<h3 id="圣遗物">圣遗物</h3>
<p>乐团</p>
<hr />
<h1 id="钟离">钟离</h1>
<h3 id="天赋周三周六周日">天赋（周三、周六、周日）</h3>
<p>E 持续 6s 冷却 10s</p>
<p>Q 持续 3.2s 冷却 12s 元素能量 40</p>
<h3 id="武器周三周六周日">武器（周三、周六、周日）</h3>
<p>黑缨枪 提高生命值</p>
<p><strong>古雷试炼场 龙蜥 射手丘丘人</strong></p>
<h3 id="圣遗物-1">圣遗物</h3>
<p>生命头 生命沙 生命杯</p>
<p>有效词条：生命、充能</p>
<ul>
<li>千岩</li>
<li>宗室</li>
</ul>
<hr />
<h1 id="香菱">香菱</h1>
<h3 id="天赋周二周五周日-勤劳的哲学-1">天赋（周二、周五、周日
勤劳的哲学）</h3>
<h3 id="武器">武器</h3>
<p>渔获 # 钓鱼太烦了</p>
<h3 id="圣遗物-2">圣遗物</h3>
<p>暴击/爆伤头 充能沙 火伤杯</p>
<p>有效词条：充能</p>
<ul>
<li>绝缘</li>
</ul>
<hr />
<h1 id="班尼特">班尼特</h1>
<h3 id="天赋周二周五周日-冰封废渊">天赋（周二、周五、周日
冰封废渊）</h3>
<p>Q 13 级</p>
<h3 id="武器-1">武器</h3>
<p>风鹰剑</p>
<h3 id="圣遗物-3">圣遗物</h3>
<p>治疗头 充能沙 生命杯</p>
<p>有效词条：充能、生命</p>
<ul>
<li>宗室</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://twoandone.github.io/2021/03/20/HashMap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Yus">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yussss">
      <meta itemprop="description" content="后端废物">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Yussss">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/20/HashMap/" class="post-title-link" itemprop="url">HashMap</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-20 13:42:25" itemprop="dateCreated datePublished" datetime="2021-03-20T13:42:25+08:00">2021-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-18 01:03:29" itemprop="dateModified" datetime="2022-07-18T01:03:29+08:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/tech/" itemprop="url" rel="index"><span itemprop="name">tech</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>介绍一下HashMap吧</p>
<p>那我首先说一下它<strong>能干什么</strong>,hashmap实现了map接口,那肯定能存储键值对,它允许null键但只能有一个,null值可以有多个,线程不安全,不保证有序,因为根据hashcode值存储数据,大多数时候可以直接定位到它的值,所以具有很快的访问速度.</p>
<p>从<strong>结构实现</strong>上看,hashmap是由数组,链表,红黑树实现的,红黑树是jdk8引进的.</p>
<p>hashmap最基本的方法是<strong>get和put方法</strong>,get是取,put是存.</p>
<p>怎么取呢?也就是<strong>get()方法的工作原理</strong>是啥.</p>
<p>在调用get方法时,我们会传入key,然后get方法内部会先调用hash方法算出hash值,也就是下标然后再调用getnode方法,接着判断链表的第一个位置存储的元素是不是要找的元素,如果不是,还会判断下一个是不是为空,为空就返回null,不为空还得判断链表的第一个结点是否是treenode的结点,如果是就继续treenode的get方法,如果不是就遍历链表来获取结点.</p>
<p>put方法呢,首先判断键值对数组table是否为空,如果是就得扩容,否就根据键值key计算hash值得到插入的数组索引,得到索引就判断这个位置是否空,空就直接插入,当然插入也得看此时的size是否大于threshold大于就还得扩容,然后回到这个不空的情况来,不空的话就得判断这个位置的key是否和给定的key相同,相同就直接覆盖,不相同就得再后面排队了,排队也得分情况,判断第一个结点是不是红黑树的结点,是红黑树就得用红黑树的方式插入,不是就直接在链表里插入,在链表里插入也得考虑此时的链表长度是否大于8,大于8就得转换为红黑树,不大于8就链表插入,key存在就直接覆盖.</p>
<figure>
<img
src="https://github.com/TwoAndOne/my-images/raw/master/img/image-20210320164108937.png"
alt="image-20210320164108937" />
<figcaption aria-hidden="true">image-20210320164108937</figcaption>
</figure>
<p>说了这么多次,根据key计算数组索引,接下来讲讲怎么计算索引吧.</p>
<p>第一步取key的hashCode值,第二步高位运算,第三步取模运算.</p>
<p><strong>HashMap的长度为什么是2的幂次方</strong></p>
<p>可能是Doug Lea太厉害了,hashmap的作者,哈哈哈.</p>
<p>不开玩笑了,为了让hashmap存储高效就得把哈希函数映射得比较均匀分散以避免哈希碰撞,但hashmap是有容量的,为了保证得到的索引值在容量范围内就得对散列值进行取余,但是取余运算符效率太低,为了能够让位运算实现取余操作,必须保证hashmap的长度也就是取模运算的模数必须为2的幂.<strong>(length
- 1) &amp; hash</strong></p>
<p><strong>HashMap怎么扩容</strong></p>
<p>因为Java里的数组无法自动扩容,方法是使用一个新的数组代替已有的容量小的数组.</p>
<p>大致分两步:1
,容量扩充为原来的两倍,2,对每个结点重新计算哈希值,重新计算索引位置,将原来的元素移动到新的哈希表中.</p>
<p><strong>HashMap与HashTable的区别</strong>k</p>
<p>作者不一样,Doug Lea没有参与HashTable的编写</p>
<p>　　1.HashMap继承于AbstractMap，而Hashtable继承于Dictionary；
　　2.线程安全不同。Hashtable的几乎所有函数都是同步的，即它是线程安全的，支持多线程。而HashMap的函数则是非同步的，它不是线程安全的。若要在多线程中使用HashMap，需要我们额外的进行同步处理；
　　3.null值。HashMap的key、value都可以为null。Hashtable的key、value都不可以为null；
　　4.迭代器(Iterator)。HashMap的迭代器(Iterator)是fail-fast迭代器，而Hashtable的enumerator迭代器不是fail-fast的。所以当有其它线程改变了HashMap的结构（增加或者移除元素），将会抛出ConcurrentModificationException。
　　5.容量的初始值和增加方式都不一样：HashMap默认的容量大小是16；增加容量时，每次将容量变为“原始容量x2”。Hashtable默认的容量大小是11；增加容量时，每次将容量变为“原始容量x2
+ 1”；
　　6.添加key-value时的hash值算法不同：HashMap添加元素时，是使用自定义的哈希算法。Hashtable没有自定义哈希算法，而直接采用的key的hashCode()。
　　7.速度。由于Hashtable是线程安全的也是synchronized，所以在单线程环境下它比HashMap要慢。如果你不需要同步，只需要单一线程，那么使用HashMap性能要好过Hashtable。</p>
<p>参考:</p>
<p>https://tech.meituan.com/2016/06/24/java-hashmap.html</p>
<p>https://snailclimb.gitee.io/javaguide/#/docs/java/collection/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98?id=_146-hashmap-%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba%e4%bb%80%e4%b9%88%e6%98%af-2-%e7%9a%84%e5%b9%82%e6%ac%a1%e6%96%b9</p>
<p>https://blog.csdn.net/u012512634/article/details/72735183</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
<!--  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
-->
 by 
  <span class="author" itemprop="copyrightHolder">Yus</span>
</div>

<!-- -->

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
